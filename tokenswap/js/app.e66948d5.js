(function(e){function t(t){for(var n,o,c=t[0],i=t[1],l=t[2],d=0,p=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==r[i]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/token-swap/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=i;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-content",[a("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[e.accounts?e._e():a("open-wallet",{on:{accounts:e.openWallet}}),e.accounts?a("swap-request",{attrs:{accounts:e.accounts}}):e._e()],1)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"6",xl:"4",lg:"6",sm:"10",md:"12"}},[a("v-card",[a("v-card-text",[a("v-img",{attrs:{src:e.publicPath+"logo.png",height:"200",contain:""}}),a("v-form",[a("v-text-field",{attrs:{label:"NEO Private Key (WIF)",name:"privateKey","prepend-icon":"mdi-key",type:"text"},model:{value:e.wif,callback:function(t){e.wif=t},expression:"wif"}}),a("v-text-field",{attrs:{label:"Ethereum Address",name:"ethAddress","prepend-icon":"mdi-lock",type:"text"},model:{value:e.ethAddress,callback:function(t){e.ethAddress=t},expression:"ethAddress"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary"},on:{click:e.openWallet}},[e._v("Open Wallet and Continue")])],1)],1)],1)],1)},c=[],i=(a("96cf"),a("1da1")),l=(a("d3b7"),a("d4ec")),u=a("bee2"),d=a("a18f"),p=a.n(d),v=a("d5ce"),f="bac0d143a547dc66a1d6a2b7d66b06de42614971",g=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,[{key:"openWallet",value:function(e){if(!e)throw new Error("WIF not provided");return new v["wallet"].Account(e)}},{key:"sendRequest",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a,n,r){var s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){var c=new v["sc"].ScriptBuilder,i=v["u"].reverseHex(v["wallet"].getScriptHashFromAddress(t.address)),l=v["u"].reverseHex(v["wallet"].getScriptHashFromAddress(t.address)),u=[i,l,1e8*a];c.emitAppCall(f,"transfer",u);var d=c.str,p={api:new v["api"].neoscan.instance("MainNet"),account:t,intents:[],script:d,fees:n,gas:0};v["api"].fillSigningFunction(p).then((function(e){return v["api"].fillUrl(e)})).then((function(e){return v["api"].fillBalance(e)})).then((function(e){return v["api"].createInvocationTx(e)})).then((function(e){return e.tx.addAttribute(v["tx"].TxAttrUsage.Script,i),e})).then((function(e){return e.tx.addRemark(r+"-"+s._getRandom(3)),e})).then((function(e){return v["api"].signTx(e)})).then(v["api"].sendTx).then((function(t){console.log(t.response),e(t.response)})).catch((function(e){console.log(e),o(e)}))})));case 1:case"end":return e.stop()}}),e)})));function t(t,a,n,r){return e.apply(this,arguments)}return t}()},{key:"getBalances",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=0,n=0,e.prev=2,e.next=5,this._callNeoscan("get_balance",t);case 5:for(r=e.sent,s=0;s<r.balance.length;s++)"brdg"===r.balance[s].asset_symbol.toLowerCase()?n=r.balance[s].amount:"gas"===r.balance[s].asset_symbol.toLowerCase()&&(a=r.balance[s].amount);e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log("Error getting balances: "+e.t0.message);case 12:return e.abrupt("return",{gas:a,brdg:n});case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_getRandom",value:function(e){var t=v["u"].sha256(v["u"].str2hexstring((new Date).toISOString()+Math.random()));return e&&(t=t.substring(0,e)),t}},{key:"_callNeoscan",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var n,r,s,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="https://neoscan.io/api/main_net/v1/"+t+"/"+a,e.next=3,p()(n,{method:"GET"});case 3:if(r=e.sent,!r.ok){e.next=15;break}return e.next=7,r.text();case 7:if(s=e.sent,!(s.length>0)){e.next=12;break}return e.abrupt("return",JSON.parse(s));case 12:return e.abrupt("return",!0);case 13:e.next=22;break;case 15:return o=r.statusText,e.next=18,r.text();case 18:return c=e.sent,c?(i=JSON.parse(c),i&&i.message&&(o=i.message)):c=r.statusText,console.log(o),e.abrupt("return",{});case 22:case"end":return e.stop()}}),e)})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),h=new g,b={name:"open-wallet",data:function(){return{publicPath:"/token-swap/",wif:null,ethAddress:null}},methods:{openWallet:function(){if(this.wif)if(this.ethAddress)try{var e=h.openWallet(this.wif);this.$emit("accounts",{neoAccount:e,ethAddress:this.ethAddress})}catch(t){alert(t.message)}else alert("Ethereum Address is required");else alert("NEO WIF is required")}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}},m=b,w=a("2877"),x=a("6544"),y=a.n(x),_=a("8336"),k=a("b0af"),A=a("99d9"),S=a("62ad"),O=a("4bd4"),V=a("adda"),R=a("0fd9"),C=a("2fa4"),j=a("8654"),T=Object(w["a"])(m,o,c,!1,null,null,null),P=T.exports;y()(T,{VBtn:_["a"],VCard:k["a"],VCardActions:A["a"],VCardText:A["b"],VCol:S["a"],VForm:O["a"],VImg:V["a"],VRow:R["a"],VSpacer:C["a"],VTextField:j["a"]});var B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{cols:"6",xl:"4",lg:"6",sm:"10",md:"12"}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""}},[a("v-toolbar-title",[e._v("Bridge Protocol Token Swap Request")])],1),e.loading&&!e.submitted?a("v-card-text",[a("v-container",{staticClass:"mt-8",attrs:{"text-center":"","align-middle":""}},[a("v-progress-circular",{attrs:{indeterminate:"",color:"secondary"}}),a("v-container",[e._v(e._s(e.loadingLabel))])],1)],1):e._e(),!e.loading&&e.submitted?a("v-card-text",[a("v-container",{staticClass:"mt-8",attrs:{"text-center":"","align-middle":""}},[e._v(" Transaction Submitted Successfully "),a("v-container",[e._v(" Transaction Id: "+e._s(e.txid)+" ")])],1)],1):e._e(),e.loading||e.submitted?e._e():a("v-card-text",[a("v-subheader",{staticClass:"pl-0 ml-0 caption"},[e._v("Addresses")]),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"1"}},[a("v-img",{attrs:{src:e.publicPath+"neo-logo.png",height:"20",contain:""}})],1),a("v-col",{attrs:{cols:"2"}},[e._v("NEO")]),a("v-col",{attrs:{cols:"auto"}},[e._v(e._s(e.accounts.neoAccount.address))])],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"1"}},[a("v-img",{attrs:{src:e.publicPath+"eth-logo.png",height:"20",contain:""}})],1),a("v-col",{attrs:{cols:"2"}},[e._v("Ethereum")]),a("v-col",{attrs:{cols:"auto"}},[e._v(e._s(e.accounts.ethAddress))])],1),a("v-subheader",{staticClass:"pl-0 ml-0 caption"},[e._v("Swap Amount")]),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{cols:"1"}},[a("v-img",{attrs:{src:e.publicPath+"bridge-token.png",height:"20",contain:""}})],1),a("v-col",{attrs:{cols:"2"}},[e._v(" BRDG ")]),a("v-col",{attrs:{cols:"auto"}},[e._v(e._s(e.brdgBalance))])],1),a("v-subheader",{staticClass:"pl-0 ml-0 caption"},[e._v("Transaction Priority")]),a("v-radio-group",{staticClass:"mt-0",attrs:{mandatory:!0,row:"",dense:""},model:{value:e.gas,callback:function(t){e.gas=t},expression:"gas"}},[a("v-radio",{attrs:{label:"Low (.001 GAS)",value:".001"}}),a("v-radio",{attrs:{label:"Medium (.05 GAS)",value:".05"}}),a("v-radio",{attrs:{label:"High (.1 GAS)",value:".1"}})],1)],1),a("v-card-actions",[a("v-spacer"),e.loading||e.submitted?e._e():a("v-btn",{attrs:{color:"secondary"},on:{click:e.requestSwap}},[e._v("Accept and Send Swap Request")])],1)],1)],1)],1)},E=[],q={name:"swap-request",props:["accounts"],data:function(){return{publicPath:"/token-swap/",gasBalance:0,brdgBalance:0,gas:".1",loading:!1,loadingLabel:"Please wait, getting balances",submitted:!1,txid:null}},methods:{requestSwap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=parseFloat(e.gas),!(a>e.gasBalance)){t.next=4;break}return alert("Not enough GAS for transaction.  GAS Balance: "+e.gasBalance),t.abrupt("return");case 4:return e.loading=!0,e.loadingLabel="Relaying transaction, please wait",t.prev=6,t.next=9,h.sendRequest(e.accounts.neoAccount,e.brdgBalance,a,e.accounts.ethAddress);case 9:if(n=t.sent,n&&n.txid){t.next=12;break}throw new Error("Could not send transaction");case 12:e.txid=n.txid,e.loading=!1,e.submitted=!0,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](6),alert("Error sending transaction: "+t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[6,17]])})))()}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,h.getBalances(e.accounts.neoAccount.address);case 3:a=t.sent,e.gasBalance=a.gas,e.brdgBalance=a.brdg,e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}},W=q,F=a("a523"),N=a("490a"),G=a("67b6"),I=a("43a6"),M=a("e0c7"),L=a("71d9"),$=a("2a7f"),H=Object(w["a"])(W,B,E,!1,null,null,null),J=H.exports;y()(H,{VBtn:_["a"],VCard:k["a"],VCardActions:A["a"],VCardText:A["b"],VCol:S["a"],VContainer:F["a"],VImg:V["a"],VProgressCircular:N["a"],VRadio:G["a"],VRadioGroup:I["a"],VRow:R["a"],VSpacer:C["a"],VSubheader:M["a"],VToolbar:L["a"],VToolbarTitle:$["a"]});var D={name:"App",components:{OpenWallet:P,SwapRequest:J},data:function(){return{accounts:null}},methods:{openWallet:function(e){this.accounts=e}},created:function(){this.$vuetify.theme.dark=!0}},K=D,U=a("7496"),z=a("a75b"),Q=Object(w["a"])(K,r,s,!1,null,null,null),X=Q.exports;y()(Q,{VApp:U["a"],VContainer:F["a"],VContent:z["a"]});var Y=a("f309");n["a"].use(Y["a"]);var Z=new Y["a"]({theme:{themes:{dark:{primary:"#3c7fc6",secondary:"#6155a3",accent:"#904099",info:"#6155a3",error:"#b71c1c"}}}});n["a"].config.productionTip=!1,new n["a"]({vuetify:Z,render:function(e){return e(X)}}).$mount("#app")}});
//# sourceMappingURL=app.e66948d5.js.map